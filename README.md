## JWT SSO工作流程
一个认证授权服务器，两个应用服务器。  前端端（Postman）发送登录请求，发送服务请求。
  
前端负责发送登录请求，获取token，存储token；做退出登录请求，直接删除token；  
发送服务请求（分两种一种是不用保护的请求，一种需要授权才能访问后端业务的请求），判断token是否存在，不存在则发送登录请求，存在则将token附在请求header。  
（这部分不属于后端范围，暂时用Postman模拟）  

后端接到前端的请求行为分为3种：  
1）接到登录请求，直接将请求转发给认证授权服务器，读取请求中的用户名、密码，与数据库中用户名密码对比；
比对成功，构造token, 并返回。比对失败返回错误信息。  
2）接到服务请求，查看附带token，后端验证token；  
    验证成功，继续业务操作；  
    验证失败，返回失败信息。  
3）不用保护的业务，直接放行。

SSO后端逻辑实现：  
+ 应用服务器  
    添加Filter，对不需要保护业务请求（包括登录）直接放行；对需要保护的业务请求进行拦截，获取头部，然后执行token校验。  
    校验通过，放行；校验失败，返回错误信息。
    后台业务，登录业务转发给认证授权服务器；服务业务执行并返回处理结果；
    
+ 认证授权服务器  
    接收登录请求以及认证授权，返回token;
    用户注册请求。
    ```
    //token payload 组成
    payload.put("uid", userName);   //用户名
    payload.put("iat", date.getTime()); //生成的时间
    payload.put("ext", date.getTime() + 1000*60*30);    //过期时间0.5小时
    ```